"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["61294"],{85345:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/mdx-checker-output-0f96cc19fd3ed4d55901ca90ad657c14.png"},51476:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/mdx2-playground-options-eab88e8328a6902759c4236ffc93d9c6.png"},78066:function(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var i=s(84259),r=s(85893),o=s(80980);let t={slug:"/migration/v3",sidebar_label:"To Docusaurus v3"},a="Upgrading to Docusaurus v3",d={},c=[{value:"Upgrading Dependencies",id:"upgrading-dependencies",level:2},{value:"Upgrading MDX",id:"upgrading-mdx",level:2},{value:"Using the MDX playground",id:"using-the-mdx-playground",level:3},{value:"Using the MDX checker CLI",id:"using-the-mdx-checker-cli",level:3},{value:"Common MDX problems",id:"common-mdx-problems",level:3},{value:"Bad usage of <code>{</code>",id:"bad-usage-of-",level:4},{value:"Bad usage of <code>&lt;</code>",id:"bad-usage-of--1",level:4},{value:"Bad usage of GFM Autolink",id:"bad-usage-of-gfm-autolink",level:4},{value:"Lower-case MDXComponent mapping",id:"lower-case-mdxcomponent-mapping",level:4},{value:"Unintended extra paragraphs",id:"unintended-extra-paragraphs",level:4},{value:"Unintended usage of directives",id:"unintended-usage-of-directives",level:4},{value:"Unsupported indented code blocks",id:"unsupported-indented-code-blocks",level:4},{value:"Other Markdown incompatibilities",id:"other-markdown-incompatibilities",level:3},{value:"Emphasis starting or ending with a space or a punctuation",id:"emphasis-starting-or-ending-with-a-space-or-a-punctuation",level:4},{value:"MDX plugins",id:"mdx-plugins",level:3},{value:"Formatters",id:"formatters",level:3},{value:"Other Breaking Changes",id:"other-breaking-changes",level:2},{value:"Node.js v18.0",id:"nodejs-v180",level:3},{value:"React v18.0+",id:"react-v180",level:3},{value:"Prism-React-Renderer v2.0+",id:"prism-react-renderer-v20",level:3},{value:"React-Live v4.0+",id:"react-live-v40",level:3},{value:"remark-emoji v4.0+",id:"remark-emoji-v40",level:3},{value:"Mermaid v10.4+",id:"mermaid-v104",level:3},{value:"TypeScript v5.1+",id:"typescript-v51",level:3},{value:"TypeScript base config",id:"typescript-base-config",level:3},{value:"New Config Loader",id:"new-config-loader",level:3},{value:"Admonition Warning",id:"admonition-warning",level:3},{value:"Versioned Sidebars",id:"versioned-sidebars",level:3},{value:"Blog Feed Limit",id:"blog-feed-limit",level:3},{value:"Docs Theme Refactoring",id:"docs-theme-refactoring",level:3},{value:"Optional Changes",id:"optional-changes",level:2},{value:"Automatic JSX runtime",id:"automatic-jsx-runtime",level:3},{value:"ESM and TypeScript Configs",id:"esm-and-typescript-configs",level:3},{value:"Using the <code>.mdx</code> extension",id:"using-the-mdx-extension",level:3},{value:"Upgrading math packages",id:"upgrading-math-packages",level:3},{value:"Turn off MDX v1 compat",id:"turn-off-mdx-v1-compat",level:3},{value:"<code>comments</code> option",id:"comments-option",level:4},{value:"<code>admonitions</code> option",id:"admonitions-option",level:4},{value:"<code>headingIds</code> option",id:"headingids-option",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2}];function l(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components},{Code:i,Details:t}=n;return i||u("Code",!0),t||u("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"upgrading-to-docusaurus-v3",children:"Upgrading to Docusaurus v3"})}),"\n",(0,r.jsx)(n.p,{children:"This documentation will help you upgrade your site from Docusaurus v2 to Docusaurus v3."}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 is a new ",(0,r.jsx)(n.strong,{children:"major version"}),", including ",(0,r.jsx)(n.strong,{children:"breaking changes"})," requiring you to adjust your site accordingly. We will guide to during this process, and also mention a few optional recommendations."]}),"\n",(0,r.jsx)(n.p,{children:"This is not a full rewrite, and the breaking changes are relatively easy to handle. The simplest sites will eventually upgrade by simply updating their npm dependencies."}),"\n",(0,r.jsxs)(n.p,{children:["The main breaking change is the upgrade from MDX v1 to MDX v3. Read the ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/blog/v2/",children:(0,r.jsx)(n.strong,{children:"MDX v2"})})," and ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/blog/v3/",children:(0,r.jsx)(n.strong,{children:"MDX v3"})})," release notes for details. MDX will now compile your Markdown content ",(0,r.jsx)(n.strong,{children:"more strictly"})," and with ",(0,r.jsx)(n.strong,{children:"subtle differences"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{title:"Before upgrading",type:"tip",children:[(0,r.jsxs)(n.p,{children:["Before upgrading, we recommend ",(0,r.jsx)(n.a,{href:"/blog/preparing-your-site-for-docusaurus-v3",children:(0,r.jsx)(n.strong,{children:"preparing your site for Docusaurus v3"})}),". There are changes that you can already ",(0,r.jsx)(n.strong,{children:"handle incrementally, under Docusaurus v2"}),". Doing so will help reduce the work needed to finally upgrade to Docusaurus v3."]}),(0,r.jsxs)(n.p,{children:["For complex sites, we also recommend to set up ",(0,r.jsx)(n.a,{href:"/blog/upgrading-frontend-dependencies-with-confidence-using-visual-regression-testing",children:(0,r.jsx)(n.strong,{children:"visual regression tests"})}),", a good way to ensure your site stays visually identical. Docusaurus v3 mainly upgrades dependencies, and is not expected to produce any visual changes."]})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Check the release notes for ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/releases/tag/v3.0.0",children:(0,r.jsx)(n.strong,{children:"Docusaurus v3.0.0"})}),", and browse the pull-requests for additional useful information and the motivation behind each change mentioned here."]})}),"\n",(0,r.jsx)(n.h2,{id:"upgrading-dependencies",children:"Upgrading Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["Upgrading to Docusaurus v3 requires upgrading core Docusaurus dependencies (",(0,r.jsx)(n.code,{children:"@docusaurus/name"}),"), but also other related packages."]}),"\n",(0,r.jsx)(n.p,{children:"Docusaurus v3 now uses the following dependencies:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Node.js v18.0+"}),"\n",(0,r.jsx)(n.li,{children:"React v18.0+"}),"\n",(0,r.jsx)(n.li,{children:"MDX v3.0+"}),"\n",(0,r.jsx)(n.li,{children:"TypeScript v5.1+"}),"\n",(0,r.jsx)(n.li,{children:"prism-react-renderer v2.0+"}),"\n",(0,r.jsx)(n.li,{children:"react-live v4.0+"}),"\n",(0,r.jsx)(n.li,{children:"remark-emoji v4.0+"}),"\n",(0,r.jsx)(n.li,{children:"mermaid v10.4+"}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{title:"Upgrading community plugins",type:"warning",children:[(0,r.jsx)(n.p,{children:"If your site uses third-party community plugins and themes, you might need to upgrade them."}),(0,r.jsx)(n.p,{children:"Make sure those plugins are compatible with Docusaurus v3 before attempting an upgrade."})]}),"\n",(0,r.jsxs)(n.p,{children:["A typical ",(0,r.jsx)(n.code,{children:"package.json"})," dependency upgrade example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="package.json"',children:' {\n   "dependencies": {\n     // upgrade to Docusaurus v3\n-    "@docusaurus/core": "2.4.3",\n-    "@docusaurus/preset-classic": "2.4.3",\n+    "@docusaurus/core": "3.0.0",\n+    "@docusaurus/preset-classic": "3.0.0",\n     // upgrade to MDX v3\n-    "@mdx-js/react": "^1.6.22",\n+    "@mdx-js/react": "^3.0.0",\n     // upgrade to prism-react-renderer v2.0+\n-    "prism-react-renderer": "^1.3.5",\n+    "prism-react-renderer": "^2.1.0",\n     // upgrade to React v18.0+\n-    "react": "^17.0.2",\n-    "react-dom": "^17.0.2"\n+    "react": "^18.2.0",\n+    "react-dom": "^18.2.0"\n   },\n   "devDependencies": {\n     // upgrade Docusaurus dev dependencies to v3\n-    "@docusaurus/module-type-aliases": "2.4.3",\n-    "@docusaurus/types": "2.4.3"\n+    "@docusaurus/module-type-aliases": "3.0.0",\n+    "@docusaurus/types": "3.0.0"\n   }\n   "engines": {\n     // require Node.js 18.0+\n-    "node": ">=16.14"\n+    "node": ">=18.0"\n   }\n }\n'})}),"\n",(0,r.jsx)(n.p,{children:"For TypeScript users:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="package.json"',children:' {\n   "devDependencies": {\n     // swap the external TypeScript config package for the new official one\n-    "@tsconfig/docusaurus": "^1.0.7",\n+    "@docusaurus/tsconfig": "3.0.0",\n     // upgrade React types to v18.0+\n-    "@types/react": "^17.0.69",\n+    "@types/react": "^18.2.29",\n     // upgrade TypeScript to v5.1+\n-    "typescript": "~4.7.4"\n+    "typescript": "~5.2.2"\n   }\n }\n'})}),"\n",(0,r.jsx)(n.h2,{id:"upgrading-mdx",children:"Upgrading MDX"}),"\n",(0,r.jsxs)(n.p,{children:["MDX is a major dependency of Docusaurus responsible for compiling your ",(0,r.jsx)(n.code,{children:".md"})," and ",(0,r.jsx)(n.code,{children:".mdx"})," files to React components."]}),"\n",(0,r.jsxs)(n.p,{children:["The transition from MDX v1 to MDX v3 is the ",(0,r.jsx)(n.strong,{children:"main challenge"})," to the adoption of Docusaurus v3. Most breaking changes come from MDX v2, and MDX v3 is a relatively small release."]}),"\n",(0,r.jsxs)(n.p,{children:["Some documents that compiled successfully under Docusaurus v2 might now ",(0,r.jsx)(n.strong,{children:"fail to compile"})," under Docusaurus v3."]}),"\n",(0,r.jsxs)(n.admonition,{title:"Find problematic content ahead of time",type:"tip",children:[(0,r.jsxs)(n.p,{children:["Run ",(0,r.jsx)(n.a,{href:"https://github.com/slorber/docusaurus-mdx-checker",children:(0,r.jsx)(n.code,{children:"npx docusaurus-mdx-checker"})})," on your site to get a list of files that will now fail to compile under Docusaurus v3."]}),(0,r.jsxs)(n.p,{children:["This command is also a good way to estimate the amount of work to be done to make your content compatible. Remember most of this work can be executed ahead of the upgrade by ",(0,r.jsx)(n.a,{href:"/blog/preparing-your-site-for-docusaurus-v3",children:"preparing your content for Docusaurus v3"}),"."]})]}),"\n",(0,r.jsxs)(n.p,{children:["Other documents might also ",(0,r.jsx)(n.strong,{children:"render differently"}),"."]}),"\n",(0,r.jsx)(n.admonition,{title:"Use visual regression tests",type:"tip",children:(0,r.jsxs)(n.p,{children:["For large sites where a manual review of all pages is complicated, we recommend you to setup ",(0,r.jsx)(n.a,{href:"https://docusaurus.io/blog/upgrading-frontend-dependencies-with-confidence-using-visual-regression-testing",children:"visual regression tests"}),"."]})}),"\n",(0,r.jsxs)(n.p,{children:["Upgrading MDX comes with all the breaking changes documented on the ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/blog/v2/",children:"MDX v2"})," and ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/blog/v3/",children:"MDX v3"})," release blog posts. Most breaking changes come from MDX v2, and MDX v3 is a relatively small release. The ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/migrating/v2/",children:"MDX v2 migration guide"})," has a section on how to ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/migrating/v2/#update-mdx-files",children:"update MDX files"})," that will be particularly relevant to us. Also make sure to read the ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/docs/troubleshooting-mdx/",children:"Troubleshooting MDX"})," page that can help you interpret common MDX error messages."]}),"\n",(0,r.jsxs)(n.p,{children:["Make sure to also read our updated ",(0,r.jsx)(n.a,{href:"/docs/markdown-features/react",children:(0,r.jsx)(n.strong,{children:"MDX and React"})})," documentation page."]}),"\n",(0,r.jsx)(n.h3,{id:"using-the-mdx-playground",children:"Using the MDX playground"}),"\n",(0,r.jsxs)(n.p,{children:["The MDX playground is your new best friend. It permits to understand how your content is ",(0,r.jsx)(n.strong,{children:"compiled to React components"}),", and troubleshoot compilation or rendering issues in isolation."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://mdxjs.com/playground/",children:"MDX playground - current version"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://mdx-git-renovate-babel-monorepo-mdx.vercel.app/playground/",children:"MDX playground - v1"})}),"\n"]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Configuring the MDX playground options for Docusaurus"}),(0,r.jsxs)(n.p,{children:["To obtain a compilation behavior similar to what Docusaurus v2 uses, please turn on these options on the ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/playground/",children:"MDX playground"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"MDX"})]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"remark-gfm"})]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"remark-directive"})]}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Screenshot of the MDX playground&#39;s options panel, with only the &quot;Use MDX&quot;, &quot;Use remark-gfm&quot;, and &quot;Use remark-directive&quot; options checked",src:s(51476).Z+"",width:"1968",height:"1316"})})]}),"\n",(0,r.jsx)(n.p,{children:"Using the two MDX playgrounds side-by-side, you will soon notice that some content is compiled differently or fails to compile in v2."}),"\n",(0,r.jsx)(n.admonition,{title:"Making your content future-proof",type:"tip",children:(0,r.jsxs)(n.p,{children:["The goal will be to refactor your problematic content so that it ",(0,r.jsx)(n.strong,{children:"works fine with both versions of MDX"}),". This way, when you upgrade to Docusaurus v3, this content will already work out-of-the-box."]})}),"\n",(0,r.jsx)(n.h3,{id:"using-the-mdx-checker-cli",children:"Using the MDX checker CLI"}),"\n",(0,r.jsxs)(n.p,{children:["We provide a ",(0,r.jsx)(n.a,{href:"https://github.com/slorber/docusaurus-mdx-checker",children:"docusaurus-mdx-checker"})," CLI that permits to easily spot problematic content. Run this command on your site to obtain a list of files that will fail to compile under MDX v3."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx docusaurus-mdx-checker\n"})}),"\n",(0,r.jsx)(n.p,{children:"For each compilation issue, the CLI will log the file path and a line number to look at."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Screenshot of the terminal showing an example MDX checker CLI output, with a few error messages",src:s(85345).Z+"",width:"1161",height:"417"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Use this CLI to estimate of how much work will be required to make your content compatible with MDX v3."})}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["This CLI is a best effort, and will ",(0,r.jsx)(n.strong,{children:"only report compilation errors"}),"."]}),(0,r.jsxs)(n.p,{children:["It will not report subtle compilation changes that do not produce errors but can affect how your content is displayed. To catch these problems, we recommend using ",(0,r.jsx)(n.a,{href:"/blog/upgrading-frontend-dependencies-with-confidence-using-visual-regression-testing",children:"visual regression tests"}),"."]})]}),"\n",(0,r.jsx)(n.h3,{id:"common-mdx-problems",children:"Common MDX problems"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus cannot document exhaustively all the changes coming with MDX. That's the responsibility of the ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/migrating/v2/",children:"MDX v2"})," and ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/migrating/v3/",children:"MDX v3"})," migration guides."]}),"\n",(0,r.jsx)(n.p,{children:"However, by upgrading a few Docusaurus sites, we noticed that most of the issues come down to only a few cases that we have documented for you."}),"\n",(0,r.jsxs)(n.h4,{id:"bad-usage-of-",children:["Bad usage of ",(0,r.jsx)(n.code,{children:"{"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"{"})," character is used for opening ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/docs/what-is-mdx/#expressions",children:"JavaScript expressions"}),". MDX will now fail if what you put inside ",(0,r.jsx)(n.code,{children:"{expression}"})," is not a valid expression."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"The object shape looks like {username: string, age: number}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Error message",type:"danger",children:(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Could not parse expression with acorn: Unexpected content after expression"}),"\n"]})}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsx)(n.p,{children:"Available options to fix this error:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use inline code: ",(0,r.jsx)(n.code,{children:"{username: string, age: number}"})]}),"\n",(0,r.jsxs)(n.li,{children:["Use the HTML code: ",(0,r.jsx)(n.code,{children:"&#123;"})]}),"\n",(0,r.jsxs)(n.li,{children:["Escape it: ",(0,r.jsx)(n.code,{children:"\\{"})]}),"\n"]})]}),"\n",(0,r.jsxs)(n.h4,{id:"bad-usage-of--1",children:["Bad usage of ",(0,r.jsx)(n.code,{children:"<"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"<"})," character is used for opening ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/docs/what-is-mdx/#jsx",children:"JSX tags"}),". MDX will now fail if it thinks your JSX is invalid."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:'Use Android version <5\n\nYou can use a generic type like Array<T>\n\nFollow the template "Road to <YOUR_MINOR_VERSION>"\n'})}),"\n",(0,r.jsxs)(n.admonition,{title:"Error messages",type:"danger",children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Unexpected character ",(0,r.jsx)(n.code,{children:"5"})," (U+0035) before name, expected a character that can start a name, such as a letter, ",(0,r.jsx)(n.code,{children:"$"}),", or ",(0,r.jsx)(n.code,{children:"_"})]}),"\n"]}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Expected a closing tag for ",(0,r.jsx)(n.code,{children:"<T>"})," (1:6-1:9) before the end of ",(0,r.jsx)(n.code,{children:"paragraph"})," end-tag-mismatch mdast-util-mdx-jsx"]}),"\n"]}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Expected a closing tag for ",(0,r.jsx)(n.code,{children:"<YOUR_MINOR_VERSION>"})," (134:19-134:39) before the end of ",(0,r.jsx)(n.code,{children:"paragraph"})]}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsx)(n.p,{children:"Available options to fix this error:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use inline code: ",(0,r.jsx)(n.code,{children:"Array<T>"})]}),"\n",(0,r.jsxs)(n.li,{children:["Use the HTML code: ",(0,r.jsx)(n.code,{children:"&lt;"})," or ",(0,r.jsx)(n.code,{children:"&#60;"})]}),"\n",(0,r.jsxs)(n.li,{children:["Escape it: ",(0,r.jsx)(n.code,{children:"\\<"})]}),"\n"]})]}),"\n",(0,r.jsx)(n.h4,{id:"bad-usage-of-gfm-autolink",children:"Bad usage of GFM Autolink"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus supports ",(0,r.jsx)(n.a,{href:"https://github.github.com/gfm/",children:"GitHub Flavored Markdown (GFM)"}),", but ",(0,r.jsx)(n.a,{href:"https://github.github.com/gfm/#autolinks",children:"autolink"})," using the ",(0,r.jsx)(n.code,{children:"<link>"})," syntax is not supported anymore by MDX."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"<sebastien@thisweekinreact.com>\n\n<http://localhost:3000>\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Error messages",type:"danger",children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Unexpected character ",(0,r.jsx)(n.code,{children:"@"})," (U+0040) in name, expected a name character such as letters, digits, ",(0,r.jsx)(n.code,{children:"$"}),", or ",(0,r.jsx)(n.code,{children:"_"}),"; whitespace before attributes; or the end of the tag (note: to create a link in MDX, use ",(0,r.jsx)(n.code,{children:"[text](url)"}),")"]}),"\n"]}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Unexpected character ",(0,r.jsx)(n.code,{children:"/"})," (U+002F) before local name, expected a character that can start a name, such as a letter, ",(0,r.jsx)(n.code,{children:"$"}),", or ",(0,r.jsx)(n.code,{children:"_"})," (note: to create a link in MDX, use ",(0,r.jsx)(n.code,{children:"[text](url)"}),")"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsxs)(n.p,{children:["Use regular Markdown links, or remove the ",(0,r.jsx)(n.code,{children:"<"})," and ",(0,r.jsx)(n.code,{children:">"}),". MDX and GFM are able to autolink literals already."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"sebastien@thisweekinreact.com\n[sebastien@thisweekinreact.com](mailto:sebastien@thisweekinreact.com)\n\nhttp://localhost:3000\n[http://localhost:3000](http://localhost:3000)\n"})})]}),"\n",(0,r.jsx)(n.h4,{id:"lower-case-mdxcomponent-mapping",children:"Lower-case MDXComponent mapping"}),"\n",(0,r.jsxs)(n.p,{children:["For users providing a ",(0,r.jsxs)(n.a,{href:"/docs/markdown-features/react#mdx-component-scope",children:["custom ",(0,r.jsx)(n.code,{children:"MDXComponent"}),"mapping"]}),', components are now "sandboxed":']}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["a ",(0,r.jsx)(n.code,{children:"MDXComponent"})," mapping for ",(0,r.jsx)(n.code,{children:"h1"})," only gets used for ",(0,r.jsx)(n.code,{children:"# hi"})," but not for ",(0,r.jsx)(n.code,{children:"<h1>hi</h1>"})]}),"\n",(0,r.jsxs)(n.li,{children:["a ",(0,r.jsx)(n.strong,{children:"lower-cased"})," custom element name will not be substituted by its respective ",(0,r.jsx)(n.code,{children:"MDXComponent"})," component anymore"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"visual difference",type:"danger",children:(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsxs)(n.a,{href:"/docs/markdown-features/react#mdx-component-scope",children:[(0,r.jsx)(n.code,{children:"MDXComponent"})," component mapping"]})," might not be applied as before, and your custom components might no longer be used."]})}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsxs)(n.p,{children:["For native Markdown elements, you can keep using ",(0,r.jsx)(n.strong,{children:"lower-case"}),": ",(0,r.jsx)(n.code,{children:"p"}),", ",(0,r.jsx)(n.code,{children:"h1"}),", ",(0,r.jsx)(n.code,{children:"img"}),", ",(0,r.jsx)(n.code,{children:"a"}),"..."]}),(0,r.jsxs)(n.p,{children:["For any other element, ",(0,r.jsx)(n.strong,{children:"use upper-case names"}),"."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="src/theme/MDXComponents.js"',children:' import MDXComponents from \'@theme-original/MDXComponents\';\n\n export default {\n   ...MDXComponents,\n   p: (props) => <p {...props} className="my-paragraph"/>\n-  myElement: (props) => <div {...props} className="my-class" />,\n+  MyElement: (props) => <div {...props} className="my-class" />,\n };\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"unintended-extra-paragraphs",children:"Unintended extra paragraphs"}),"\n",(0,r.jsxs)(n.p,{children:["In MDX v3, it is now possible to interleave JSX and Markdown more easily without requiring extra line breaks. Writing content on multiple lines can also produce new expected ",(0,r.jsx)(n.code,{children:"<p>"})," tags."]}),"\n",(0,r.jsxs)(n.admonition,{title:"visual difference",type:"danger",children:[(0,r.jsx)(n.p,{children:"See how this content is rendered differently by MDX v1 and v3."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"<div>Some **Markdown** content</div>\n<div>\n  Some **Markdown** content\n</div>\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="MDX v1 output"',children:"<div>Some **Markdown** content</div>\n<div>Some **Markdown** content</div>\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",metastring:'title="MDX v3 output"',children:"<div>Some <strong>Markdown</strong> content</div>\n<div><p>Some <strong>Markdown</strong> content</p></div>\n"})})]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsxs)(n.p,{children:["If you don't want an extra ",(0,r.jsx)(n.code,{children:"<p>"})," tag, refactor content on a case by case basis to use a single-line JSX tag."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",children:' <figure>\n   <img src="/img/myImage.png" alt="My alt" />\n-  <figcaption>\n-    My image caption\n-  </figcaption>\n+  <figcaption>My image caption</figcaption>\n </figure>\n'})}),(0,r.jsxs)(n.p,{children:["You can also wrap such content with ",(0,r.jsx)(n.code,{children:"{"})," and ",(0,r.jsx)(n.code,{children:"}"})," to avoid extra ",(0,r.jsx)(n.code,{children:"<p>"})," tags if you don't intend to use Markdown syntax there yet."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",children:'-<figure>\n+{<figure>\n   <img src="/img/myImage.png" alt="My alt" />\n   <figcaption>\n     My image caption\n   </figcaption>\n-</figure>\n+</figure>}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"unintended-usage-of-directives",children:"Unintended usage of directives"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 now uses ",(0,r.jsx)(n.a,{href:"https://talk.commonmark.org/t/generic-directives-plugins-syntax/444",children:"Markdown Directives"})," (implemented with ",(0,r.jsx)(n.a,{href:"https://github.com/remarkjs/remark-directive",children:"remark-directive"}),") as a generic way to provide support for admonitions, and other upcoming Docusaurus features."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"This is a :textDirective\n\n::leafDirective\n\n:::containerDirective\n\nContainer directive content\n\n:::\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Visual change",type:"danger",children:[(0,r.jsx)(n.p,{children:"Directives are parsed with the purpose of being handled by other Remark plugins. Unhandled directives will be ignored, and won't be rendered back in their original form."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"The AWS re:Invent conf is great\n"})}),(0,r.jsxs)(n.p,{children:["Due to ",(0,r.jsx)(n.code,{children:":Invent"})," being parsed as a text directive, this will now be rendered as:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"The AWS re\nconf is great\n"})})]}),"\n",(0,r.jsx)(n.admonition,{title:"How to upgrade",type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use the HTML code: ",(0,r.jsx)(n.code,{children:"&#58;"})]}),"\n",(0,r.jsxs)(n.li,{children:["Add a space after ",(0,r.jsx)(n.code,{children:":"})," (if it makes sense): ",(0,r.jsx)(n.code,{children:": text"})]}),"\n",(0,r.jsxs)(n.li,{children:["Escape it: ",(0,r.jsx)(n.code,{children:"\\:"})]}),"\n"]})}),"\n",(0,r.jsx)(n.h4,{id:"unsupported-indented-code-blocks",children:"Unsupported indented code blocks"}),"\n",(0,r.jsx)(n.p,{children:"MDX does not transform indented text as code blocks anymore."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:'    console.log("hello");\n'})}),"\n",(0,r.jsx)(n.admonition,{title:"Visual change",type:"danger",children:(0,r.jsx)(n.p,{children:"The upgrade does not generally produce new MDX compilation errors, but can lead to content being rendered in an unexpected way because there isn't a code block anymore."})}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsx)(n.p,{children:"Use the regular code block syntax instead of indentation:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"```js\nconsole.log('hello');\n```\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"other-markdown-incompatibilities",children:"Other Markdown incompatibilities"}),"\n",(0,r.jsx)(n.h4,{id:"emphasis-starting-or-ending-with-a-space-or-a-punctuation",children:"Emphasis starting or ending with a space or a punctuation"}),"\n",(0,r.jsx)(n.p,{children:"New MDX parser now strictly complies with the CommonMark spec. CommonMark spec has introduced rules for emphasis around spaces and punctuation, which are incompatible especially with languages that do not use a space to split words, since v0.14."}),"\n",(0,r.jsx)(n.p,{children:"Japanese and Chinese are most affected by this, but there are some other languages that can be affected (e.g. Thai and Khmer), for example when you try to emphasize an inline code or a link. Languages that use a space to split words are much less affected."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"**"})," (other than ",(0,r.jsx)(n.code,{children:"`**`"}),") in the following example were parsed as intended in Docusaurus 2, but are not now in Docusaurus 3."]}),"\n","\n","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="example.md"',children:"**Do not end a range of emphasis with a space. **Or `**` will not work as intended.\n\n\x3c!-- Japanese --\x3e\n**\u300C\u3002\u300D\u306E\u5F8C\u306B\u6587\u3092\u7D9A\u3051\u308B\u3068`**`\u304C\u610F\u56F3\u3057\u305F\u52D5\u4F5C\u3092\u3057\u307E\u305B\u3093\u3002**\u307E\u305F\u3001**[\u30EA\u30F3\u30AF](https://docusaurus.io/)**\u3084**`\u30B3\u30FC\u30C9`**\u306E\u3059\u3050\u5916\u5074\u306B`**`\u3001\u305D\u306E\u3055\u3089\u306B\u5916\u5074\u306B\u53E5\u8AAD\u70B9\u4EE5\u5916\u304C\u3042\u308B\u5834\u5408\u3082\u540C\u69D8\u3067\u3059\u3002\n"})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"See the detailed conditions and how to upgrade"}),(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"*"})," or ",(0,r.jsx)(n.code,{children:"**"})," matches either of the following conditions, it will not work as the beginning of an emphasis mark anymore:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The next character is a space (e.g. ",(0,r.jsx)(n.code,{children:"word* word"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["The previous character is a punctuation character and the next character is a letter (not a space or punctuation character) (e.g. ",(0,r.jsx)(n.code,{children:"\u6587**\uFF08\u6587\uFF09"}),")"]}),"\n"]}),(0,r.jsxs)(n.p,{children:["On the contrary, if ",(0,r.jsx)(n.code,{children:"*"})," or ",(0,r.jsx)(n.code,{children:"**"})," matches either of the following conditions, it will not work as the end of an emphasis mark anymore:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The previous character is a space (e.g. ",(0,r.jsx)(n.code,{children:"word *word"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["The next character is a punctuation character and the previous character is a letter (e.g. ",(0,r.jsx)(n.code,{children:"\u6587\u3002**\u6587"}),")"]}),"\n"]}),(0,r.jsxs)(n.p,{children:["\u201CA punctuation character\u201D includes non-ASCII ones, brackets, quotation marks and some symbols including ",(0,r.jsx)(n.code,{children:"%"})," and ",(0,r.jsx)(n.code,{children:"@"}),". More strictly speaking, a character whose 2-letters Unicode category starts with ",(0,r.jsx)(n.code,{children:"P"})," is treated as a punctuation character here."]}),(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsx)(n.p,{children:"If the offending emphasis mark is next to a space, move the space out of the range of emphasis:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="english.md"',children:"**Do not end a range of emphasis with a space.** Or `**` will not work.\n"})}),(0,r.jsx)(n.p,{children:"If the offending emphasis mark is surrounded by both a punctuation character and a letter, you can fix it without modifying the content by:"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Convert the document to MDX if it is a vanilla Markdown."}),"\n",(0,r.jsxs)(n.li,{children:["replace the offending emphasis mark with a raw HTML tag (",(0,r.jsx)(n.code,{children:"<em>"})," or ",(0,r.jsx)(n.code,{children:"<strong>"}),") instead:"]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mdx",metastring:'title="japanese.mdx"',children:"<strong>\u300C\u3002\u300D\u306E\u5F8C\u306B\u6587\u3092\u7D9A\u3051\u308B\u3068`**`\u304C\u610F\u56F3\u3057\u305F\u52D5\u4F5C\u3092\u3057\u307E\u305B\u3093\u3002</strong>\u307E\u305F\u3001<strong>[\u30EA\u30F3\u30AF](https://docusaurus.io/)</strong>\u3084<strong>`\u30B3\u30FC\u30C9`</strong>\u306E\u3059\u3050\u5916\u5074\u306B`**`\u3001\u305D\u306E\u3055\u3089\u306B\u5916\u5074\u306B\u53E5\u8AAD\u70B9\u4EE5\u5916\u304C\u3042\u308B\u5834\u5408\u3082\u540C\u69D8\u3067\u3059\u3002\n"})}),(0,r.jsx)(n.p,{children:"While not an ideal solution, you can also either of the following without converting the document to MDX:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Move the most outside punctuation character out of the emphasis mark."}),"\n","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="japanese.md"',children:"**\u300C\u3002\u300D\u306E\u5F8C\u306B\u6587\u3092\u7D9A\u3051\u308B\u3068`**`\u304C\u610F\u56F3\u3057\u305F\u52D5\u4F5C\u3092\u3057\u307E\u305B\u3093**\u3002\u307E\u305F\u3001[**\u30EA\u30F3\u30AF**](https://docusaurus.io/)\u3084\u30FB\u30FB\u30FB\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Put a space just outside of the offending ",(0,r.jsx)(n.code,{children:"*"})," or ",(0,r.jsx)(n.code,{children:"**"}),". This solution does not force you to convert the document to MDX."]}),"\n","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",metastring:'title="japanese.md"',children:"**\u300C\u3002\u300D\u306E\u5F8C\u306B\u6587\u3092\u7D9A\u3051\u308B\u3068`**`\u304C\u610F\u56F3\u3057\u305F\u52D5\u4F5C\u3092\u3057\u307E\u305B\u3093\u3002** \u307E\u305F\u3001**[\u30EA\u30F3\u30AF](https://docusaurus.io/)** \u3084 **`\u30B3\u30FC\u30C9`** \u306E\u3059\u3050\u5916\u5074\u306B`**`\u3001\u305D\u306E\u3055\u3089\u306B\u5916\u5074\u306B\u53E5\u8AAD\u70B9\u4EE5\u5916\u304C\u3042\u308B\u5834\u5408\u3082\u540C\u69D8\u3067\u3059\u3002\n"})}),"\n"]}),"\n"]}),(0,r.jsxs)(n.p,{children:["A unofficial remark plugin ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/remark-cjk-friendly",children:"remark-cjk-friendly"})," can fix this issue in most cases without modifying the Markdown source written in Chinese, Japanese, and Korean like the above."]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"mdx-plugins",children:"MDX plugins"}),"\n",(0,r.jsxs)(n.p,{children:["All the official packages (Unified, Remark, Rehype...) in the MDX ecosystem are now ",(0,r.jsx)(n.a,{href:"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c",children:(0,r.jsx)(n.strong,{children:"ES Modules only"})})," and do not support ",(0,r.jsx)(n.a,{href:"https://nodejs.org/api/modules.html#modules-commonjs-modules",children:"CommonJS"})," anymore."]}),"\n",(0,r.jsxs)(n.p,{children:["In practice this means that you can't do ",(0,r.jsx)(n.code,{children:'require("remark-plugin")'})," anymore."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsxs)(n.p,{children:["Docusaurus v3 now supports ",(0,r.jsx)(n.a,{href:"https://flaviocopes.com/es-modules/",children:(0,r.jsx)(n.strong,{children:"ES Modules"})})," configuration files. We recommend that you migrate your config file to ES module, that enables you to import the Remark plugins easily:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"import remarkPlugin from 'remark-plugin';\n\nexport default {\n  title: 'Docusaurus',\n  /* site config using remark plugins here */\n};\n"})}),(0,r.jsxs)(n.p,{children:["If you want to keep using CommonJS modules, you can use dynamic imports as a workaround that enables you to import ES modules inside a CommonJS module. Fortunately, the ",(0,r.jsx)(n.a,{href:"/docs/configuration#syntax-to-declare-docusaurus-config",children:"Docusaurus config supports the usage of an async function"})," to let you do so."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"module.exports = async function () {\n  const myPlugin = (await import('remark-plugin')).default;\n  return {\n    // site config...\n  };\n};\n"})})]}),"\n",(0,r.jsx)(n.admonition,{title:"For plugin authors",type:"info",children:(0,r.jsxs)(n.p,{children:["If you created custom Remark or Rehype plugins, you may need to refactor those, or eventually rewrite them completely, due to how the new AST is structured. We have created a ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/9337",children:"dedicated support discussion"})," to help plugin authors upgrade their code."]})}),"\n",(0,r.jsx)(n.h3,{id:"formatters",children:"Formatters"}),"\n",(0,r.jsxs)(n.p,{children:["Prettier, the most common formatter, supports only the legacy MDX v1, not v3 yet as of Docusaurus v3.0.0. You can add ",(0,r.jsx)(n.code,{children:"{/* prettier-ignore */}"})," before the incompatible parts of your code to make it work with Prettier."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mdx",children:"{/* prettier-ignore */}\n<SomeComponent>Some long text in the component</SomeComponent>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you get tired of too many ",(0,r.jsx)(n.code,{children:"{/* prettier-ignore */}"})," insertions, you can consider disabling MDX formatting by Prettier by adding the following to your ",(0,r.jsx)(n.code,{children:".prettierignore"})," file, until it starts supporting MDX v3:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-txt",metastring:'title=".prettierignore"',children:"*.mdx\n"})}),"\n",(0,r.jsx)(n.h2,{id:"other-breaking-changes",children:"Other Breaking Changes"}),"\n",(0,r.jsx)(n.p,{children:"Apart the MDX v3 upgrade, here is an exhaustive list of breaking changes coming with Docusaurus v3."}),"\n",(0,r.jsx)(n.h3,{id:"nodejs-v180",children:"Node.js v18.0"}),"\n",(0,r.jsxs)(n.p,{children:["Node.js 16 ",(0,r.jsx)(n.a,{href:"https://nodejs.org/en/blog/announcements/nodejs16-eol",children:"reached End-of-Life"}),", and Docusaurus v3 now requires ",(0,r.jsx)(n.strong,{children:"Node.js >= 18.0"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"tip",children:[(0,r.jsx)(n.p,{children:"Install Node.js 18.0+ on your computer."}),(0,r.jsx)(n.p,{children:"Eventually, configure your continuous integration, CDN or host to use this new Node.js version."}),(0,r.jsxs)(n.p,{children:["You can also update your site ",(0,r.jsx)(n.code,{children:"package.json"})," to prevent usage of an older unsupported version:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="package.json"',children:' {\n   "engines": {\n-     "node": ">=16.14"\n+     "node": ">=18.0"\n   }\n }\n'})}),(0,r.jsx)(n.p,{children:"Upgrade your Docusaurus v2 site to Node.js 18 before upgrading to Docusaurus v3."})]}),"\n",(0,r.jsx)(n.h3,{id:"react-v180",children:"React v18.0+"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 now requires ",(0,r.jsx)(n.strong,{children:"React >= 18.0"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"React 18 comes with its own breaking changes that should be relatively easy to handle, depending on the amount of custom React code you created for your site. The official themes and plugins are compatible with React 18."}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsxs)(n.p,{children:["Read the official ",(0,r.jsx)(n.a,{href:"https://react.dev/blog/2022/03/29/react-v18",children:"React v18.0"})," and ",(0,r.jsx)(n.a,{href:"https://react.dev/blog/2022/03/08/react-18-upgrade-guide",children:"How to Upgrade to React 18"}),", and look at your own React code to figure out which components might be affected this upgrade."]}),(0,r.jsx)(n.p,{children:"We recommend to particularly look for:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Automatic batching for stateful components"}),"\n",(0,r.jsx)(n.li,{children:"New React hydration errors reported to the console"}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{title:"Experimental support for React 18 features",type:"danger",children:[(0,r.jsx)(n.p,{children:"React 18 comes with new features:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"<Suspense>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"React.lazy()"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"startTransition"})}),"\n"]}),(0,r.jsx)(n.p,{children:"Their Docusaurus support is considered as experimental. We might have to adjust the integration in the future, leading to a different runtime behavior."})]}),"\n",(0,r.jsx)(n.h3,{id:"prism-react-renderer-v20",children:"Prism-React-Renderer v2.0+"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 upgrades ",(0,r.jsx)(n.a,{href:"https://github.com/FormidableLabs/prism-react-renderer",children:(0,r.jsx)(n.code,{children:"prism-react-renderer"})})," to v2.0+. This library is used for code block syntax highlighting."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsxs)(n.p,{children:["This is a new major library version containing breaking changes, and we can't guarantee a strict retro-compatibility. The ",(0,r.jsxs)(n.a,{href:"https://github.com/FormidableLabs/prism-react-renderer/releases/tag/prism-react-renderer%402.0.0",children:[(0,r.jsx)(n.code,{children:"prism-react-renderer"})," v2 release notes"]})," are not super exhaustive, but there are 3 major changes to be aware of for Docusaurus users."]}),(0,r.jsx)(n.p,{children:"The dependency should be upgraded:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="package.json"',children:' {\n   "dependencies": {\n-    "prism-react-renderer": "^1.3.5",\n+    "prism-react-renderer": "^2.1.0",\n }\n'})}),(0,r.jsx)(n.p,{children:"The API to import themes in your Docusaurus config file has been updated:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="docusaurus.config.js"',children:"- const lightTheme = require('prism-react-renderer/themes/github');\n- const darkTheme = require('prism-react-renderer/themes/dracula');\n+ const {themes} = require('prism-react-renderer');\n+ const lightTheme = themes.github;\n+ const darkTheme = themes.dracula;\n"})}),(0,r.jsxs)(n.p,{children:["Previously, ",(0,r.jsx)(n.code,{children:"react-prism-render"})," v1 ",(0,r.jsx)(n.a,{href:"https://github.com/FormidableLabs/prism-react-renderer/blob/v1.3.5/src/vendor/prism/includeLangs.js",children:"included more languages by default"}),". From v2.0+, ",(0,r.jsx)(n.a,{href:"https://github.com/FormidableLabs/prism-react-renderer/blob/prism-react-renderer%402.1.0/packages/generate-prism-languages/index.ts#L9",children:"less languages are included by default"}),". You may need to add extra languages to your Docusaurus config:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"const siteConfig = {\n  themeConfig: {\n    prism: {\n      // highlight-next-line\n      additionalLanguages: ['bash', 'diff', 'json'],\n    },\n  },\n};\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"react-live-v40",children:"React-Live v4.0+"}),"\n",(0,r.jsxs)(n.p,{children:["For users of the ",(0,r.jsx)(n.code,{children:"@docusaurus/theme-live-codeblock"})," package, Docusaurus v3 upgrades ",(0,r.jsx)(n.a,{href:"https://github.com/FormidableLabs/react-live",children:(0,r.jsx)(n.code,{children:"react-live"})})," to v4.0+."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"In theory, you have nothing to do, and your existing interactive code blocks should keep working as before."}),(0,r.jsxs)(n.p,{children:["However, this is a new major library version containing breaking changes, and we can't guarantee a strict retro-compatibility. Read the ",(0,r.jsx)(n.a,{href:"https://github.com/FormidableLabs/react-live/releases/tag/v3.0.0",children:"v3"})," and ",(0,r.jsx)(n.a,{href:"https://github.com/FormidableLabs/react-live/releases/tag/v4.0.0",children:"v4"})," changelogs in case of problems."]})]}),"\n",(0,r.jsx)(n.h3,{id:"remark-emoji-v40",children:"remark-emoji v4.0+"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 upgrades ",(0,r.jsx)(n.a,{href:"https://github.com/rhysd/remark-emoji",children:(0,r.jsx)(n.code,{children:"remark-emoji"})})," to v4.0+. This library is to support ",(0,r.jsx)(n.code,{children:":emoji:"})," shortcuts in Markdown."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsxs)(n.p,{children:["Most Docusaurus users have nothing to do. Users of emoji shortcodes should read the ",(0,r.jsx)(n.a,{href:"https://github.com/rhysd/remark-emoji/blob/master/CHANGELOG.md",children:"changelog"})," and double-check their emojis keep rendering as expected."]}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Breaking Change"})," Update ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/node-emoji",children:"node-emoji"})," from v1 to v2. This change introduces support for many new emojis and removes old emoji short codes which are no longer valid on GitHub."]}),"\n"]})]}),"\n",(0,r.jsx)(n.h3,{id:"mermaid-v104",children:"Mermaid v10.4+"}),"\n",(0,r.jsxs)(n.p,{children:["For users of the ",(0,r.jsx)(n.code,{children:"@docusaurus/theme-mermaid"})," package, Docusaurus v3 upgrades ",(0,r.jsx)(n.a,{href:"https://github.com/mermaid-js/mermaid",children:(0,r.jsx)(n.code,{children:"mermaid"})})," to v10.4+."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"In theory, you have nothing to do, and your existing diagrams should keep working as before."}),(0,r.jsxs)(n.p,{children:["However, this is a new major library version containing breaking changes, and we can't guarantee a strict retro-compatibility. Read the ",(0,r.jsx)(n.a,{href:"https://github.com/mermaid-js/mermaid/releases/tag/v10.0.0",children:"v10"})," changelog in case of problem."]})]}),"\n",(0,r.jsx)(n.h3,{id:"typescript-v51",children:"TypeScript v5.1+"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 now requires ",(0,r.jsx)(n.strong,{children:"TypeScript >= 5.1"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"Upgrade your dependencies to use TypeScript 5+"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="package.json"',children:' {\n   "devDependencies": {\n-    "typescript": "~4.7.4"\n+    "typescript": "~5.2.2"\n   }\n }\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"typescript-base-config",children:"TypeScript base config"}),"\n",(0,r.jsxs)(n.p,{children:["The official Docusaurus TypeScript config has been re-internalized from the external package ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/@tsconfig/docusaurus",children:(0,r.jsx)(n.code,{children:"@tsconfig/docusaurus"})})," to our new monorepo package ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/@docusaurus/tsconfig",children:(0,r.jsx)(n.code,{children:"@docusaurus/tsconfig"})}),"."]}),"\n",(0,r.jsx)(n.p,{children:"This new package is versioned alongside all the other Docusaurus core packages, and will be used to ensure TypeScript retro-compatibility and breaking changes on major version upgrades."}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"Swap the external TypeScript config package for the new official one"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="package.json"',children:' {\n   "devDependencies": {\n-    "@tsconfig/docusaurus": "^1.0.7",\n+    "@docusaurus/tsconfig": "3.0.0",\n   }\n }\n'})}),(0,r.jsxs)(n.p,{children:["Use it in your ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," file:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="tsconfig.json"',children:' {\n-  "extends": "@tsconfig/docusaurus/tsconfig.json",\n+  "extends": "@docusaurus/tsconfig",\n   "compilerOptions": {\n     "baseUrl": "."\n   }\n }\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"new-config-loader",children:"New Config Loader"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 changes its internal config loading library from ",(0,r.jsx)(n.a,{href:"https://github.com/sindresorhus/import-fresh",children:(0,r.jsx)(n.code,{children:"import-fresh"})})," to ",(0,r.jsx)(n.a,{href:"https://github.com/unjs/jiti",children:(0,r.jsx)(n.code,{children:"jiti"})}),". It is responsible for loading files such as ",(0,r.jsx)(n.code,{children:"docusaurus.config.js"})," or ",(0,r.jsx)(n.code,{children:"sidebars.js"}),", and Docusaurus plugins."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"In theory, you have nothing to do, and your existing config files should keep working as before."}),(0,r.jsx)(n.p,{children:"However, this is a major dependency swap and subtle behavior changes could occur."})]}),"\n",(0,r.jsx)(n.h3,{id:"admonition-warning",children:"Admonition Warning"}),"\n",(0,r.jsxs)(n.p,{children:["For historical reasons, we support an undocumented admonition ",(0,r.jsx)(n.code,{children:":::warning"})," that renders with a red color."]}),"\n",(0,r.jsx)(n.admonition,{title:"Warning",type:"danger",children:(0,r.jsxs)(n.p,{children:["This is a Docusaurus v2 ",(0,r.jsx)(n.code,{children:":::warning"})," admonition."]})}),"\n",(0,r.jsxs)(n.p,{children:["However, the color and icon have always been wrong. Docusaurus v3 re-introduces ",(0,r.jsx)(n.code,{children:":::warning"})," admonition officially, documents it, and fix the color and icon."]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["This is a Docusaurus v3 ",(0,r.jsx)(n.code,{children:":::warning"})," admonition."]})}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsxs)(n.p,{children:["If you previously used the undocumented ",(0,r.jsx)(n.code,{children:":::warning"})," admonition, make sure to verify for each usage if yellow is now an appropriate color. If you want to keep the red color, use ",(0,r.jsx)(n.code,{children:":::danger"})," instead."]}),(0,r.jsxs)(n.p,{children:["Docusaurus v3 also ",(0,r.jsxs)(n.a,{href:"https://github.com/facebook/docusaurus/pull/9308",children:["deprecated the ",(0,r.jsx)(n.code,{children:":::caution"})]})," admonition. Please refactor ",(0,r.jsx)(n.code,{children:":::caution"})," (yellow) to either ",(0,r.jsx)(n.code,{children:":::warning"})," (yellow) or ",(0,r.jsx)(n.code,{children:":::danger"})," (red)."]}),(0,r.jsxs)(n.p,{children:["If you want to keep the title \u201Ccaution\u201D, you might want to refactor it to ",(0,r.jsx)(n.code,{children:":::warning[caution]"})," (yellow)."]})]}),"\n",(0,r.jsx)(n.h3,{id:"versioned-sidebars",children:"Versioned Sidebars"}),"\n",(0,r.jsxs)(n.p,{children:["This breaking change will only affect ",(0,r.jsx)(n.strong,{children:"Docusaurus v2 early adopters"})," who versioned their docs before ",(0,r.jsx)(n.code,{children:"v2.0.0-beta.10"})," (December 2021)."]}),"\n",(0,r.jsxs)(n.p,{children:["When creating version ",(0,r.jsx)(n.code,{children:"v1.0.0"}),", the sidebar file contained a prefix ",(0,r.jsx)(n.code,{children:"version-v1.0.0/"})," that ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/pull/9310",children:"Docusaurus v3 does not support anymore"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="versioned_sidebars/version-v1.0.0-sidebars.json"',children:'{\n  "version-v1.0.0/docs": [\n    "version-v1.0.0/introduction",\n    "version-v1.0.0/prerequisites"\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"Remove the useless versioned prefix from your versioned sidebars."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="versioned_sidebars/version-v1.0.0-sidebars.json"',children:'{\n  "docs": ["introduction", "prerequisites"]\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"blog-feed-limit",children:"Blog Feed Limit"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@docusaurus/plugin-content-blog"})," now limits the RSS feed to the last 20 entries by default. For large Docusaurus blogs, this is a more sensible default value to avoid an increasingly large RSS file."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsxs)(n.p,{children:['In case you don\'t like this new default behavior, you can revert to the former "unlimited feed" behavior with the new ',(0,r.jsx)(n.code,{children:"limit: false"})," feed option:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"const blogOptions = {\n  feedOptions: {\n    // highlight-next-line\n    limit: false,\n  },\n};\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"docs-theme-refactoring",children:"Docs Theme Refactoring"}),"\n",(0,r.jsxs)(n.p,{children:["For users that swizzled docs-related theme components (like ",(0,r.jsx)(n.code,{children:"@theme/DocPage"}),"), these components have been significantly refactor to make it easier to customize."]}),"\n",(0,r.jsxs)(n.p,{children:["Technically, ",(0,r.jsx)(n.strong,{children:"this is not a breaking change"})," because these components are ",(0,r.jsx)(n.strong,{children:"flagged as unsafe to swizzle"}),", however many Docusaurus sites ejected docs-related components, and will be interested to know their customizations might break Docusaurus."]}),"\n",(0,r.jsxs)(n.admonition,{title:"How to upgrade",type:"info",children:[(0,r.jsx)(n.p,{children:"Delete all your swizzled components, re-swizzle them, and re-apply your customizations on top of the newly updated components."}),(0,r.jsxs)(n.p,{children:["Alternatively, you can look at the ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/pull/7966",children:"pull-request notes"})," to understand the new theme component tree structure, and eventually try to patch your swizzled components manually."]})]}),"\n",(0,r.jsx)(n.h2,{id:"optional-changes",children:"Optional Changes"}),"\n",(0,r.jsx)(n.p,{children:"Some changes are not mandatory, but remain useful to be aware of to plainly leverage Docusaurus v3."}),"\n",(0,r.jsx)(n.h3,{id:"automatic-jsx-runtime",children:"Automatic JSX runtime"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 now uses the React 18 ",(0,r.jsx)(n.a,{href:"https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html",children:'"automatic" JSX runtime'}),"."]}),"\n",(0,r.jsx)(n.p,{children:"It is not needed anymore to import React in JSX files that do not use any React API."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:'title="src/components/MyComponent.js"',children:"- import React from 'react';\n\n  export default function MyComponent() {\n    return <div>Hello</div>;\n  }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"esm-and-typescript-configs",children:"ESM and TypeScript Configs"}),"\n",(0,r.jsx)(n.p,{children:"Docusaurus v3 supports ESM and TypeScript config files, and it might be a good idea to adopt those new options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"export default {\n  title: 'Docusaurus',\n  url: 'https://docusaurus.io',\n  // your site config ...\n};\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="docusaurus.config.ts"',children:"import type {Config} from '@docusaurus/types';\nimport type * as Preset from '@docusaurus/preset-classic';\n\nconst config: Config = {\n  title: 'My Site',\n  favicon: 'img/favicon.ico',\n  presets: [\n    [\n      'classic',\n      {\n        /* Your preset config here */\n      } satisfies Preset.Options,\n    ],\n  ],\n\n  themeConfig: {\n    /* Your theme config here */\n  } satisfies Preset.ThemeConfig,\n};\n\nexport default config;\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"using-the-mdx-extension",children:["Using the ",(0,r.jsx)(n.code,{children:".mdx"})," extension"]}),"\n",(0,r.jsxs)(n.p,{children:["We recommend using the ",(0,r.jsx)(n.code,{children:".mdx"})," extension whenever you use JSX, ",(0,r.jsx)(n.code,{children:"import"}),", or ",(0,r.jsx)(n.code,{children:"export"})," (i.e. MDX features) inside a Markdown file. It is semantically more correct and improves compatibility with external tools (IDEs, formatters, linters, etc.)."]}),"\n",(0,r.jsxs)(n.p,{children:["In future versions of Docusaurus, ",(0,r.jsx)(n.code,{children:".md"})," files will be parsed as standard ",(0,r.jsx)(n.a,{href:"https://commonmark.org/",children:"CommonMark"}),", which does not support these features. In Docusaurus v3, ",(0,r.jsx)(n.code,{children:".md"})," files keep being compiled as MDX files, but it will be possible to ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/issues/3018",children:"opt-in for CommonMark"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"upgrading-math-packages",children:"Upgrading math packages"}),"\n",(0,r.jsxs)(n.p,{children:["If you use Docusaurus to render ",(0,r.jsx)(n.a,{href:"/docs/markdown-features/math-equations",children:"Math Equations"}),", you should upgrade the MDX plugins."]}),"\n",(0,r.jsxs)(n.p,{children:["Make sure to use ",(0,r.jsx)(n.code,{children:"remark-math 6"})," and ",(0,r.jsx)(n.code,{children:"rehype-katex 7"})," for Docusaurus v3 (using MDX v3). We can't guarantee other versions will work."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",metastring:"package.json",children:'{\n-  "remark-math": "^3.0.0",\n+  "remark-math": "^6.0.0",\n-  "rehype-katex": "^5.0.0"\n+  "rehype-katex": "^7.0.0"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hast-util-is-element"})," is now unnecessary in Docusaurus v3. If you have installed it and don't use it somewhere else, you can just remove it by running ",(0,r.jsx)(n.code,{children:"npm uninstall hast-util-is-element"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"turn-off-mdx-v1-compat",children:"Turn off MDX v1 compat"}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus v3 comes with ",(0,r.jsx)(n.a,{href:"/docs/api/docusaurus-config#markdown",children:"MDX v1 compatibility options"}),", that are turned on by default."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"export default {\n  markdown: {\n    mdx1Compat: {\n      comments: true,\n      admonitions: true,\n      headingIds: true,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"comments-option",children:[(0,r.jsx)(n.code,{children:"comments"})," option"]}),"\n",(0,r.jsx)(n.p,{children:"This option allows the usage of HTML comments inside MDX, while HTML comments are officially not supported anymore."}),"\n",(0,r.jsxs)(n.p,{children:["For MDX files, we recommend to progressively use MDX ",(0,r.jsx)(n.code,{children:"{/* comments */}"})," instead of HTML ",(0,r.jsx)(n.code,{children:"\x3c!-- comments --\x3e"}),", and then turn this compatibility option off."]}),"\n",(0,r.jsx)(n.admonition,{title:"Blog truncate marker",type:"info",children:(0,r.jsxs)(n.p,{children:["The default blog truncate marker now supports both ",(0,r.jsx)(n.code,{children:"\x3c!-- truncate --\x3e"})," and ",(0,r.jsx)(n.code,{children:"{/* truncate */}"}),"."]})}),"\n",(0,r.jsxs)(n.h4,{id:"admonitions-option",children:[(0,r.jsx)(n.code,{children:"admonitions"})," option"]}),"\n",(0,r.jsxs)(n.p,{children:["This option allows the usage of the Docusaurus v2 ",(0,r.jsx)(n.a,{href:"/docs/markdown-features/admonitions#specifying-title",children:"admonition title"})," syntax:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",children:":::note\xa0Your Title\n\ncontent\n\n:::\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Docusaurus now implements admonitions with ",(0,r.jsx)(n.a,{href:"https://talk.commonmark.org/t/generic-directives-plugins-syntax/444",children:"Markdown Directives"})," (implemented with ",(0,r.jsx)(n.a,{href:"https://github.com/remarkjs/remark-directive",children:"remark-directive"}),"), and the syntax to provide a directive label requires square brackets:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-md",children:":::note[Your Title]\n\ncontent\n\n:::\n"})}),"\n",(0,r.jsx)(n.p,{children:"We recommend to progressively use the new Markdown directive label syntax, and then turn this compatibility option off."}),"\n",(0,r.jsxs)(n.h4,{id:"headingids-option",children:[(0,r.jsx)(n.code,{children:"headingIds"})," option"]}),"\n",(0,r.jsxs)(n.p,{children:["This option allows the usage of the Docusaurus v2 ",(0,r.jsx)(n.a,{href:"/docs/markdown-features/toc#heading-ids",children:"explicit heading id"})," syntax:"]}),"\n",(0,r.jsx)(i,{language:"md",children:"### Hello World {#my-explicit-id}\n"}),"\n",(0,r.jsxs)(n.p,{children:["This syntax is now invalid MDX, and would require to escape the ",(0,r.jsx)(n.code,{children:"{"})," character: ",(0,r.jsx)(n.code,{children:"\\{#my-explicit-id}"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"We recommend to keep this compatibility option on for now, until we provide a new syntax compatible with newer versions of MDX."}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:"In case of any upgrade problem, the first things to try are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["make sure all your docs compile in the ",(0,r.jsx)(n.a,{href:"https://mdxjs.com/playground/",children:"MDX playground"}),", or using ",(0,r.jsx)(n.a,{href:"https://github.com/slorber/docusaurus-mdx-checker",children:(0,r.jsx)(n.code,{children:"npx docusaurus-mdx-checker"})})]}),"\n",(0,r.jsxs)(n.li,{children:["delete ",(0,r.jsx)(n.code,{children:"node_modules"})," and ",(0,r.jsx)(n.code,{children:"package-lock.json"}),", and then run ",(0,r.jsx)(n.code,{children:"npm install"})," again"]}),"\n",(0,r.jsxs)(n.li,{children:["run ",(0,r.jsx)(n.code,{children:"docusaurus clear"})," to clear the caches"]}),"\n",(0,r.jsx)(n.li,{children:"remove third-party plugins that might not support Docusaurus v3"}),"\n",(0,r.jsx)(n.li,{children:"delete all your swizzled components"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Once you have tried that, you can ask for support through the following support channels:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/9336",children:"Docusaurus v3 - Upgrade Support"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://discord.com/channels/398180168688074762/1154771869094912090",children:"Docusaurus v3 - Discord channel #migration-v2-to-v3"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/9053",children:"MDX v3 - Upgrade Support"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/9337",children:"MDX v3 - Remark/Rehype Plugins Support"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://discord.com/channels/398180168688074762/1116724556976111616",children:"MDX v3 - Discord channel #migration-mdx-v3"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Please consider ",(0,r.jsx)(n.strong,{children:"our time is precious"}),". To ensure that your support request is not ignored, we kindly ask you to:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["provide a ",(0,r.jsx)(n.strong,{children:"minimal"})," reproduction that we can easily run, ideally created with ",(0,r.jsx)(n.a,{href:"https://docusaurus.new",children:"docusaurus.new"})]}),"\n",(0,r.jsx)(n.li,{children:"provide a live deployment url showing the problem in action (if your site can build)"}),"\n",(0,r.jsx)(n.li,{children:'explain clearly the problem, much more than an ambiguous "it doesn\'t work"'}),"\n",(0,r.jsx)(n.li,{children:"include as much relevant material as possible: code snippets, repo url, git branch urls, full stack traces, screenshots and videos"}),"\n",(0,r.jsx)(n.li,{children:"present your request clearly, concisely, showing us that you have made an effort to help us help you"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, you can look for a paid ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/9281",children:"Docusaurus Service Provider"})," to execute this upgrade for you. If your site is open source, you can also ask our community for ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/9283",children:"free, benevolent help"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}function u(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},80980:function(e,n,s){s.d(n,{Z:()=>a,a:()=>t});var i=s(67294);let r={},o=i.createContext(r);function t(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}},84259:function(e){e.exports=JSON.parse('{"id":"migration/v3","title":"Upgrading to Docusaurus v3","description":"This documentation will help you upgrade your site from Docusaurus v2 to Docusaurus v3.","source":"@site/docs/migration/v3.mdx","sourceDirName":"migration","slug":"/migration/v3","permalink":"/docs/migration/v3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/migration/v3.mdx","tags":[],"version":"current","lastUpdatedBy":"Marcelo Junior","lastUpdatedAt":1752133331000,"frontMatter":{"slug":"/migration/v3","sidebar_label":"To Docusaurus v3"},"sidebar":"docs","previous":{"title":"Upgrading Docusaurus","permalink":"/docs/migration"},"next":{"title":"Overview","permalink":"/docs/migration/v2"}}')}}]);